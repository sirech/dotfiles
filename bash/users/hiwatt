# -*- mode: Shell-script-*-

#
# Settings for the machine 'hiwatt'
#

## ENV

# Ruby: Deploy Rails app via Capistrano
export GEM_HOME=~/.gems/
export GEM_PATH=$GEM_HOME:/usr/lib/ruby/gems/1.8

# Python
export PYTHON_VERSION=2.7
export PYDIR=~/opt/Python/${PYTHON_VERSION}
export DJANGO_SRC=~/opt/django_src
export PATH=${PYDIR}/bin:$PATH:${DJANGO_SRC}/django/bin
export PYTHONPATH=${DJANGO_SRC}:~/projects/django
export DJANGO_SETTINGS_MODULE=myproject.settings

export GIT_PATH=~/git.hceris.com

export PATH=~/bin:~/.gems/bin:$PATH

# Synch ~/bin/python with current version
rm ~/bin/python
ln -s ~/opt/Python/${PYTHON_VERSION}/bin/python ~/bin/python

## ALIASES

# Disable perl regexps
alias grep='grep'

## DEFUNS

# Create a new remote git repository
function new_remote_git()
{
    if [ -z $1 ]; then
        echo "usage: $FUNCNAME project-name.git"
    else
        gitdir="$GIT_PATH/$1"
        mkdir $gitdir
        pushd $gitdir
        git --bare init
        git --bare update-server-info
        chmod a+x hooks/post-update
        touch git-daemon-export-ok
        popd
    fi
}

# Backup wiki data
function remote_backup_wiki() {
    cd ~/wiki
    zip -r wiki-bckp-$(date +%Y-%m-%d).zip data
}
